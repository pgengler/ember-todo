<li
  class="task {{if this.isEditing 'editing'}} {{if @task.done 'done'}} {{if @task.isError 'error'}} {{if @task.isNew 'pending'}}"
  draggable="true"
  {{on "dblclick" this.editTask}}
  {{on "dragstart" this.onDragStart}}
  {{on "touchend" this.simulateDoubleClicks}}
  ...attributes
>
  {{#if this.isEditing}}
    <AutofocusElasticTextarea
      @escape-press={{action this.cancelEdit}}
      @focus-out={{action this.cancelEdit}}
      @insert-newline={{action this.updateTask}}
      @value={{this.editDescription}}
      class="edit"
    />
  {{else}}
    <div class="state">
      {{#if @task.isError}}
        {{fa-icon "warning" title="Task failed to save"}}
      {{else if @task.isNew}}
        {{fa-icon "spinner" spin=true}}
      {{else}}
        <input type="checkbox" checked={{@task.done}} onchange={{action this.toggleTaskDone}}>
      {{/if}}
    </div>

    {{markdown-to-html @task.description}}
  {{/if}}
</li>
