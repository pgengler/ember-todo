{{#view "nav"}}
{{date-picker-icon action="changeDate"}}
{{/view}}
<div class="days">
	{{#each day in controller}}
	<div {{bind-attr class=":task-list :spec-day day.isPast:past day.isCurrent:current day.isFuture:future day.hasUnfinishedTasks"}}>
	{{#draggable-dropzone dropped="moveTaskToDay"}}
		<h1>{{day-name day.date}}</h1>
		<h2>{{format-date day.date}}</h2>
		<ul>
			{{#each task in day.sortedTasks itemController="task"}}
				{{#draggable-task task=task class="spec-task"}}
					{{#if task.isEditing}}
						{{autofocus-elastic-textarea class="edit" value=task.editDescription insert-newline="updateTask" focus-out="cancelEdit" escape-press="cancelEdit"}}
					{{else}}
						{{input type="checkbox" checked=task.isDone}}
						<div {{action "editTask" on="doubleClick"}}>{{task.description}}</div>
					{{/if}}
				{{/draggable-task}}
			{{/each}}
			<li>
				{{elastic-textarea class="spec-new-task" value=day.newTaskDescription placeholder="Add new task" insert-newline="addTask"}}
			</li>
		</ul>
		{{/draggable-dropzone}}
	</div>
	{{/each}}
</div>
